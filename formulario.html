<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Document</title>

    <!-- Compiled and minified CSS -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/css/materialize.min.css">
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script src="js/script.js"></script>
 <!-- <script src="https://code.jquery.com/jquery-3.4.1.js"></script> -->
</head>
<body>
   
               <!-- Añadido onchange para cargar los productos -->
            
               <div class="row">
                 <div class="input-field col s12">
                    <select class="browser-default" name="servicio" id="servicio" onchange="cargarProductos()">
                        <!-- Hay que terminar los options -->
                        <!-- 
                             Eliminado de value la llamada a la función,
                             si eso funciona lo desconocía, y aunque 
                             lo haga es totalmente innecesario, 
                             lo correcto es usar el evento onchange 
                          -->
                        <option value="">Seleccione un servicio</option>
                    </select>
                 </div>

                 <div class="input-field col s12">
                    <select class="browser-default" name="producto" id="producto">
                        <!-- Hay que terminar los options -->
                        <!-- 
                             Eliminado de value la llamada a la función,
                             si eso funciona lo desconocía, y aunque 
                             lo haga es totalmente innecesario, 
                             lo correcto es usar el evento onchange 
                          -->
                        <option value="">Seleccione un producto</option>
                    </select>
                 </div>
               </div>
                  
 
<!-- Compiled and minified JavaScript -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/materialize/1.0.0/js/materialize.min.js"></script>

     <script>
             document.addEventListener('DOMContentLoaded', function() {
    var elems = document.querySelectorAll('select');
    var instances = M.FormSelect.init(elems);
  });
         function cargarServicios() {
    var array = ["Promocionales", "Bordados", "Impresión Digital", "Serigrafía", "Confección", "Sublimación", "Impresión Láser"];
    array.sort();
    addOptions("servicio", array);
}


//Función para agregar opciones a un <select>.
function addOptions(domElement, array) {
    var selector = document.getElementsByName(domElement)[0];
    for (servicio in array) {
        var opcion = document.createElement("option");
        opcion.text = array[servicio];
        // Añadimos un value a los option para hacer mas facil escoger los productos
        opcion.value = array[servicio].trim().toLowerCase().normalize('NFD').replace(/[\u0300-\u036f]/g, '').replace(/ /g, "");
        selector.add(opcion);
    }
}

function cargarProductos() {
    // Objeto servicios con productos
    var listaProductos = {
      bordados: ["Camisas"],
      impresiondigital: ["Banner", "Vinil", "Microperforado"],
      promocionales: ["Gorras", "Llaveros", "Agendas", "Gabachas", "Camisetas", "Lapiceros", "Calculadoras", "Tazas", "Lanyard", "Pachones", "Almohadas", "Lápices", "Pulseras"],
      serigrafia: ["Camisas", "Pachones", "Telas"],
      confeccion: ["Camisas Polo", "Suéteres", "Uniformes"],
      sublimacion: ["Tazas", "Camisas", "Telas"],
      impresionlaser: ["Foldcote", "Couche", "Adhesivo"]
    }
    
    var servicios = document.getElementById('servicio')
    var productos = document.getElementById('producto')
    var servicioSeleccionado = servicios.value
    
    // Se limpian los productos
    productos.innerHTML = '<option value="">Seleccione un producto</option>'
    
    if(servicioSeleccionado !== ''){
      // Se seleccionan los productos y se ordenan
      servicioSeleccionado = listaProductos[servicioSeleccionado]
      servicioSeleccionado.sort()
    
      // Insertamos los productos
      servicioSeleccionado.forEach(function(producto){
        let opcion = document.createElement('option')
        opcion.value = producto
        opcion.text = producto
        productos.add(opcion)
      });
    }
  }

  cargarServicios();

    </script>
</body>
</html>
<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
	<title> Vue.js </title>
	
	<!-- Latest compiled and minified CSS -->
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

</head>
<body>

	<div id="app" class="container">
		<h1> Router </h1>
		<ul class="nav nav-pills">
			<li role="presentation">
				<router-link to="/principal">Principal</router-link>
			</li>
			<li role="presentation">
				<router-link to="/posts">Ver publicaciones</router-link>
			</li>
		</ul>
		<router-view></router-view>
	</div>

	<script src="https://unpkg.com/vue/dist/vue.js"></script>
	<script src="https://unpkg.com/vue-router/dist/vue-router.js"></script>
	<script src="https://unpkg.com/axios/dist/axios.min.js"></script>

	<script>

		const Principal = {
			template: `
				<div>
					<h2> Esta es mi página principal </h2>
					<p> Simple ejemplo de <a href="https://vuejs.org/v2/guide/routing.html" target="_blank">Vue router</a>. </p>
				</div>
			`
		};

		const Posts = {
			data: function(){
				return {
					// cargando: true,
					// error: false,
					posts: [{
"userId": 1,
"id": 1,
"title": "sunt aut facere repellat provident occaecati excepturi optio reprehenderit",
"body": "quia et suscipit\nsuscipit recusandae consequuntur expedita et cum\nreprehenderit molestiae ut ut quas totam\nnostrum rerum est autem sunt rem eveniet architecto"
},
{
"userId": 1,
"id": 1,
"title": "qui est esse",
"body": "est rerum tempore vitae\nsequi sint nihil reprehenderit dolor beatae ea dolores neque\nfugiat blanditiis voluptate porro vel nihil molestiae ut reiciendis\nqui aperiam non debitis possimus qui neque nisi nulla"
},
{
"userId": 3,
"id": 1,
"title": "ea molestias quasi exercitationem repellat qui ipsa sit aut",
"body": "et iusto sed quo iure\nvoluptatem occaecati omnis eligendi aut ad\nvoluptatem doloribus vel accusantium quis pariatur\nmolestiae porro eius odio et labore et velit aut"
},
{
"userId": 1,
"id": 4,
"title": "eum et est occaecati",
"body": "ullam et saepe reiciendis voluptatem adipisci\nsit amet autem assumenda provident rerum culpa\nquis hic commodi nesciunt rem tenetur doloremque ipsam iure\nquis sunt voluptatem rerum illo velit"
},
{
"userId": 1,
"id": 5,
"title": "nesciunt quas odio",
"body": "repudiandae veniam quaerat sunt sed\nalias aut fugiat sit autem sed est\nvoluptatem omnis possimus esse voluptatibus quis\nest aut tenetur dolor neque"
},
{
"userId": 1,
"id": 6,
"title": "dolorem eum magni eos aperiam quia",
"body": "ut aspernatur corporis harum nihil quis provident sequi\nmollitia nobis aliquid molestiae\nperspiciatis et ea nemo ab reprehenderit accusantium quas\nvoluptate dolores velit et doloremque molestiae"
},
{
"userId": 1,
"id": 7,
"title": "magnam facilis autem",
"body": "dolore placeat quibusdam ea quo vitae\nmagni quis enim qui quis quo nemo aut saepe\nquidem repellat excepturi ut quia\nsunt ut sequi eos ea sed quas"
},
{
"userId": 1,
"id": 8,
"title": "dolorem dolore est ipsam",
"body": "dignissimos aperiam dolorem qui eum\nfacilis quibusdam animi sint suscipit qui sint possimus cum\nquaerat magni maiores excepturi\nipsam ut commodi dolor voluptatum modi aut vitae"
},
{
"userId": 1,
"id": 9,
"title": "nesciunt iure omnis dolorem tempora et accusantium",
"body": "consectetur animi nesciunt iure dolore\nenim quia ad\nveniam autem ut quam aut nobis\net est aut quod aut provident voluptas autem voluptas"
},
{
"userId": 1,
"id": 10,
"title": "optio molestias id quia eum",
"body": "quo et expedita modi cum officia vel magni\ndoloribus qui repudiandae\nvero nisi sit\nquos veniam quod sed accusamus veritatis error"
},]
				}
			},
			// created: function(){
			// 	this.recuperarPosts();
			// },
			// methods: {
			// 	recuperarPosts: function(){
			// 		var that = this;
			// 		axios.get('https://jsonplaceholder.typicode.com/posts/')
			// 		.then(function (response) {
			// 			that.cargando = false;
			// 			that.posts = response.data;
			// 		})
			// 		.catch(function (error) {
			// 			that.cargando = false;
			// 			that.error = true;
			// 		});
			// 	}
			// },
			template: `
				<div>
					<div v-if="cargando">
						Cargando publicaciones...
					</div>
					<div v-else-if="error" class="alert alert-danger">
						Error al intentar cargar las publicaciones.
					</div>
					<div v-else>
						<h2> Publicaciones </h2>
						<table class="table table-striped">
							<thead>
								<tr>
									<th> Id de usuario </th>
									<th> Id </th>
									<th> Título </th>
									<th>  </th>
								</tr>
							</thead>
							<tbody>
								<tr v-for="item in posts">
									<td> {{ item.userId }} </td>
									<td> {{ item.id }} </td>
									<td> {{ item.title }} </td>
									<td>
										<router-link :to="'/posts/' + item.id" > Ver publicación </router-link> 
									</td>
								</tr>
							</tbody>
						</table>
					</div>
				</div>
			`
		};

		const Post = {
			data: function(){
				return {
					cargando: true,
					error: false,
					post: null
				}
			},
			created: function(){
				this.recuperarPost();
			},
			methods: {
				recuperarPost: function(){
					var that = this;
					var ide = this.$route.params.id;
					axios.get('https://jsonplaceholder.typicode.com/posts/' + ide)
					.then(function (response) {
						that.cargando = false;
						that.post = response.data;
					})
					.catch(function (error) {
						that.cargando = false;
						that.error = true;
					});
				}
			},
			template: `
				<div>
					<div v-if="cargando">
						Cargando publicación...
					</div>
					<div v-else-if="error" class="alert alert-danger">
						Error al intentar cargar la publicación.
					</div>
					<div v-else>
						<h2> {{ post.title }} </h2>
						<hr />
						<div class="row">
							<div class="col-md-12">
								{{ post.body }}
							</div>
						</div>
					</div>
				</div>
			`
		};

		const routes = [
			{path: '/', component: Principal},
		  	{path: '/principal', component: Principal},
		  	{path: '/posts', component: Posts},
		  	{path: '/posts/:id', component: Post}
		];

		const router = new VueRouter({
			routes: routes
		});

		const app = new Vue({
			router: router
		}).$mount('#app');

	</script>

</body>
</html>
